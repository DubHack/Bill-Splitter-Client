"use strict";!function(){function a(){$(".menu").removeClass("open"),$(".darken").removeClass("open"),setTimeout(function(){$(".darken").hide()},150),d=!0}function b(){$(".darken").show(),setTimeout(function(){$(".darken").addClass("open"),$(".menu").addClass("open")}),d=!1}function c(){d?b():a()}var d=!0;$(document.body).on("click","a, .darken",a),$(document.body).on("click",".navbar-toggle",c)}(),angular.module("billSplitterClientApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/login.html",controller:"LoginCtrl",noAuth:!0}).when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl"}).when("/add",{templateUrl:"views/add.html",controller:"AddCtrl"}).when("/add-amount",{templateUrl:"views/add-amount.html",controller:"AddAmountCtrl"}).when("/bill/:id",{templateUrl:"views/bill.html",controller:"BillCtrl"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","data",function(a,b){a.$on("$routeChangeStart",function(a,c){c.$$route&&c.$$route.noAuth||b.isAuthed().then(function(b){b||(a.preventDefault(),window.location="#/login")})}),a.signOut=function(){window.localStorage.remove("username"),window.localStorage.remove("password"),window.location="#/login"}}]),angular.module("billSplitterClientApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("billSplitterClientApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("billSplitterClientApp").controller("LoginCtrl",["$scope","$rootScope","data",function(a,b,c){function d(a,b){window.localStorage.setItem("username",a),window.localStorage.setItem("password",b)}if(b.title="Join",a.number="",a.error="",a.isSignup=!0,a.toggleLogin=function(){a.isSignup=!a.isSignup},a.login=function(){d(a.email,a.password),c.isAuthed().then(function(b){b?window.location="#/home":a.error="Invalid username or password!"})},a.register=function(){var b={email:a.email,number:a.number,password:a.password};c.signup(b).then(function(c){c.error?a.error=c.error:(d(b.email,b.password),window.location="#/home")})},c.isAuthed().then(function(a){a&&(window.location="#/home")}),"undefined"!=typeof cordova){var e=cordova.require("cordova/plugin/telephonenumber");e.get(function(b){a.number=b,a.$digest()},function(){})}}]),angular.module("billSplitterClientApp").controller("HomeCtrl",["$scope","$rootScope","data",function(a,b,c){b.title="Bills",a.bills=[],c.getBills().then(function(b){a.bills=b})}]),angular.module("billSplitterClientApp").controller("AddCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("billSplitterClientApp").controller("AddAmountCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("billSplitterClientApp").service("data",["$q",function(a){this.getBills=function(){var b=a.defer();return b.resolve([{id:1,name:"Indian Food",total:55.32,paid:12.32},{id:2,name:"Spaceship",total:1e6,paid:.05}]),b.promise},this.getBill=function(){var b=a.defer();return b.resolve({name:"Spaceship",total:1e6,people:[{name:"You"},{name:"Tristan",phone:"(206)382-2834"}]}),b.promise},this.signup=function(){var b=a.defer();return b.resolve(!0),b.promise},this.isAuthed=function(){var b=a.defer();return b.resolve(window.localStorage.getItem("username")&&window.localStorage.getItem("password")),b.promise},this.getCards=function(){}}]),angular.module("billSplitterClientApp").controller("BillCtrl",["$scope","$rootScope","$routeParams","data",function(a,b,c,d){function e(){var b=_.reduce(a.bill.people,function(a,b){return a+b.modifier},0);_.each(a.bill.people,function(c){c.pays=(a.bill.total*(1*c.modifier/b)).toFixed(2)})}a.edit=!0,a.bill={name:"Loading..."},a.$watch("bill.total",e),a.increase=function(a){a.modifier=a.modifier%10+1,e()},d.getBill(c.id).then(function(c){_.each(c.people,function(a){a.modifier=1}),a.bill=c,e(),b.title="Bill: "+a.bill.name})}]);